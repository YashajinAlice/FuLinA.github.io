<script>
  import { onMount } from 'svelte';
  
  let visible = false;
  let latestPost = {
    title: 'wwuidä¸»è¦æ•™ç¨‹',
    date: '2025-08-26',
    excerpt: 'è¯¥æ–‡ç« å°šåœ¨æ–½å·¥ä¸­...'
  };
  
  onMount(() => {
    // å»¶é²é¡¯ç¤ºé€šçŸ¥
    setTimeout(() => {
      visible = true;
    }, 1000);
  });
  
  function closeNotification() {
    visible = false;
  }
  
  function viewPost() {
    // è·³è½‰åˆ°æ–‡ç« é é¢
    window.location.href = 'posts/guide';
  }
</script>

{#if visible}
  <div class="fixed top-4 right-4 z-50 animate-slide-in-right">
    <!-- é€šçŸ¥å¡ç‰‡ -->
    <div class="relative bg-gradient-to-br from-purple-500/95 via-pink-500/95 to-cyan-500/95 backdrop-blur-sm rounded-2xl p-6 shadow-2xl border border-white/20 max-w-sm">
      <!-- è£é£¾æ€§å…ƒç´  -->
      <div class="absolute -top-2 -left-2 w-4 h-4 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full animate-pulse"></div>
      <div class="absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-br from-cyan-400 to-blue-500 rounded-full animate-ping"></div>
      
      <!-- é—œé–‰æŒ‰éˆ• -->
      <button 
        on:click={closeNotification}
        class="absolute top-2 right-2 text-white/70 hover:text-white transition-colors duration-200"
      >
        âœ•
      </button>
      
      <!-- æ¨™é¡Œå€åŸŸ -->
      <div class="flex items-center mb-3">
        <div class="w-8 h-8 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-full flex items-center justify-center mr-3 animate-bounce">
          <span class="text-white text-lg">ğŸ“°</span>
        </div>
        <h3 class="text-white font-bold text-lg">æœ€æ–°æ–‡ç« æ›´æ–°</h3>
      </div>
      
      <!-- æ–‡ç« è³‡è¨Š -->
      <div class="mb-4">
        <h4 class="text-white font-semibold mb-2 line-clamp-2">{latestPost.title}</h4>
        <p class="text-white/80 text-sm mb-2 line-clamp-2">{latestPost.excerpt}</p>
        <div class="flex items-center text-white/60 text-xs">
          <span class="mr-1">ğŸ•</span>
          {latestPost.date}
        </div>
      </div>
      
      <!-- æŒ‰éˆ•å€åŸŸ -->
      <div class="flex gap-2">
        <button 
          on:click={viewPost}
          class="flex-1 bg-white/20 hover:bg-white/30 text-white font-medium py-2 px-4 rounded-lg transition-all duration-200 hover:scale-105 backdrop-blur-sm"
        >
          ç«‹å³é–±è®€
        </button>
        <button 
          on:click={closeNotification}
          class="px-4 py-2 text-white/70 hover:text-white transition-colors duration-200"
        >
          ç¨å¾Œ
        </button>
      </div>
      
      <!-- åº•éƒ¨è£é£¾ -->
      <div class="absolute -bottom-1 left-1/2 transform -translate-x-1/2 w-16 h-1 bg-gradient-to-r from-transparent via-white/30 to-transparent rounded-full"></div>
    </div>
  </div>
{/if}

<style>
  .animate-slide-in-right {
    animation: slideInRight 0.6s ease-out forwards;
  }
  
  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
