<script>
  import { onMount } from 'svelte';
  
  let visible = false;
  let announcement = {
    title: '20250826ÂÖ¨Âëä',
    content: 'ÊàëÊ≠£Âú®Â∞ãÊâæ2-3‰ΩçÂ∞ç„Ääwwuid„ÄãÊï∏ÊìöÂàÜÊûêÊúâÁÜ±ÊÉÖ„ÄÅÈ°òÊÑè‰∏ÄÂêåÂä†ÂÖ•ÈñãÁôºË°åÂàóÁöÑÂ§•‰º¥„ÄÇÂ¶ÇÊûú‰Ω†Á¨¶Âêà‰ª•‰∏ãÊ¢ù‰ª∂ÔºåÊàëË™†ÊëØÂú∞ÈÇÄË´ã‰Ω†Âä†ÂÖ•Ôºö\nÂ∞çÊï∏ÊìöÊïèÊÑüÔºåÊìÖÈï∑Êï∏ÂÄºË®àÁÆóÔºöÂçîÂä©ÊàëÂÄëÈÄ≤Ë°åËßíËâ≤„ÄÅÊäÄËÉΩ„ÄÅÊ≠¶Âô®Á≠âÂêÑÈ†ÖÊï∏ÂÄºÁöÑÁ≤æÊ∫ñË®àÁÆóËàáÈ©óË≠â„ÄÇ\nÁÜ±Ë°∑ÊñºÊî∂ÈõÜÈÅäÊà≤Ë≥áÊñôÔºöË≤†Ë≤¨Êî∂ÈõÜÊúÄÊñ∞ÁöÑËßíËâ≤ÊäÄËÉΩ„ÄÅÂ∞àÊ≠¶Êï∏ÂÄº„ÄÅÁ¥†ÊùêÊ∏ÖÂñÆÁ≠âÈÅäÊà≤ÂÖßÊï∏ÊìöÂê´ÂúñÂÉèÁ≠â„ÄÇ',
    type: 'info', // info, warning, success, error
    date: '2024-01-01'
  };
  
  onMount(() => {
    // ÊØèÊ¨°ËºâÂÖ•ÈÉΩÈ°ØÁ§∫ÂÖ¨Âëä
    setTimeout(() => {
      visible = true;
    }, 2000);
  });
  
  function closeModal() {
    visible = false;
  }
  
  function getTypeConfig() {
    switch (announcement.type) {
      case 'warning':
        return {
          icon: 'material-symbols:warning',
          bgColor: 'from-yellow-500/95 via-orange-500/95 to-red-500/95',
          iconColor: 'from-yellow-400 to-orange-500',
          borderColor: 'border-yellow-300/50'
        };
      case 'success':
        return {
          icon: 'material-symbols:check-circle',
          bgColor: 'from-green-500/95 via-emerald-500/95 to-teal-500/95',
          iconColor: 'from-green-400 to-emerald-500',
          borderColor: 'border-green-300/50'
        };
      case 'error':
        return {
          icon: 'material-symbols:error',
          bgColor: 'from-red-500/95 via-pink-500/95 to-rose-500/95',
          iconColor: 'from-red-400 to-pink-500',
          borderColor: 'border-red-300/50'
        };
      default:
        return {
          icon: 'material-symbols:info',
          bgColor: 'from-blue-500/95 via-purple-500/95 to-indigo-500/95',
          iconColor: 'from-blue-400 to-purple-500',
          borderColor: 'border-blue-300/50'
        };
    }
  }
  
  $: typeConfig = getTypeConfig();
</script>

{#if visible}
  <!-- ËÉåÊôØÈÅÆÁΩ© -->
  <div class="fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fade-in" on:click={closeModal}></div>
  
  <!-- ÂΩàÁ™óÂÖßÂÆπ -->
  <div class="fixed inset-0 z-[9999] flex items-center justify-center p-4">
    <div class="relative bg-gradient-to-br {typeConfig.bgColor} backdrop-blur-sm rounded-3xl p-8 shadow-2xl border {typeConfig.borderColor} max-w-md w-full animate-scale-in">
      <!-- Ë£ùÈ£æÊÄßÂÖÉÁ¥† -->
      <div class="absolute -top-3 -left-3 w-6 h-6 bg-gradient-to-br from-white/20 to-transparent rounded-full animate-pulse"></div>
      <div class="absolute -top-2 -right-2 w-4 h-4 bg-gradient-to-br from-white/30 to-transparent rounded-full animate-ping"></div>
      <div class="absolute -bottom-2 -left-2 w-5 h-5 bg-gradient-to-br from-white/10 to-transparent rounded-full animate-bounce"></div>
      
             <!-- ÈóúÈñâÊåâÈàï -->
       <button 
         on:click={closeModal}
         class="absolute top-4 right-4 text-white/70 hover:text-white transition-colors duration-200 hover:scale-110"
       >
         ‚úï
       </button>
      
      <!-- Ê®ôÈ°åÂçÄÂüü -->
      <div class="flex items-center mb-6">
                 <div class="w-12 h-12 bg-gradient-to-br {typeConfig.iconColor} rounded-full flex items-center justify-center mr-4 animate-bounce">
           <span class="text-white text-2xl">
             {announcement.type === 'warning' ? '‚ö†Ô∏è' : 
              announcement.type === 'success' ? '‚úÖ' : 
              announcement.type === 'error' ? '‚ùå' : '‚ÑπÔ∏è'}
           </span>
         </div>
        <div>
          <h2 class="text-white font-bold text-xl">{announcement.title}</h2>
                     <div class="flex items-center text-white/60 text-sm mt-1">
             <span class="mr-1">üïê</span>
             {announcement.date}
           </div>
        </div>
      </div>
      
      <!-- ÂÖßÂÆπÂçÄÂüü -->
      <div class="mb-6">
        <p class="text-white/90 text-base leading-relaxed">{announcement.content}</p>
      </div>
      
      <!-- ÊåâÈàïÂçÄÂüü -->
      <div class="flex justify-end">
        <button 
          on:click={closeModal}
          class="bg-white/20 hover:bg-white/30 text-white font-medium py-3 px-6 rounded-xl transition-all duration-200 hover:scale-105 backdrop-blur-sm"
        >
          ÊàëÁü•ÈÅì‰∫Ü
        </button>
      </div>
      
      <!-- Â∫ïÈÉ®Ë£ùÈ£æ -->
      <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 w-24 h-1 bg-gradient-to-r from-transparent via-white/40 to-transparent rounded-full"></div>
    </div>
  </div>
{/if}

<style>
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out forwards;
  }
  
  .animate-scale-in {
    animation: scaleIn 0.4s ease-out forwards;
  }
  
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  
  @keyframes scaleIn {
    from {
      transform: scale(0.8);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }
</style>
